{% extends 'base.html' %}
{% load static %}

{% block title %}灵汐命理平台 - 专业命理分析服务{% endblock %}

{% block content %}
<!-- 英雄区域 -->
<section class="hero-section feature-section text-center py-5 fade-in">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 slide-in-left">
                <h1 class="display-4 fw-bold mb-4 text-gradient">
                    <i class="fas fa-moon me-3"></i>灵汐命理
                </h1>
                <h2 class="h3 text-mystical mb-4">探索命运的奥秘，感受灵性的指引</h2>
                <p class="lead mb-4">专业的命理分析平台，融合传统智慧与现代科技，为您解读人生密码，指引前进方向。</p>
                <div class="d-grid gap-3 d-md-flex justify-content-center">
                    <a href="{% url 'divination:bazi' %}" class="btn btn-primary btn-lg px-5 mystic-glow">
                        <i class="fas fa-star me-2"></i>开始占卜
                    </a>
                    <a href="{% url 'chinese_calendar:calendar' %}" class="btn btn-warning btn-lg px-5">
                        <i class="fas fa-calendar-alt me-2"></i>查看黄历
                    </a>
                </div>
            </div>
            <div class="col-lg-6 text-center slide-in-right">
                <div class="hero-image-container position-relative">
                    <div class="mystical-circle position-absolute top-50 start-50 translate-middle"></div>
                    <i class="fas fa-yin-yang display-1 text-gradient" style="font-size: 8rem; opacity: 0.8;"></i>
                    <div class="floating-elements">
                        <i class="fas fa-star position-absolute" style="top: 10%; left: 20%; animation: mysticFloat 3s ease-in-out infinite;"></i>
                        <i class="fas fa-moon position-absolute" style="top: 20%; right: 20%; animation: mysticFloat 4s ease-in-out infinite reverse;"></i>
                        <i class="fas fa-sun position-absolute" style="bottom: 20%; left: 30%; animation: mysticFloat 5s ease-in-out infinite;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 统计数据 -->
<section class="stats-section py-5">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-md-3">
                <div class="stats-card fade-in">
                    <div class="stat-number">{{ total_users|default:0 }}</div>
                    <div class="stat-label">
                        <i class="fas fa-users me-2"></i>注册用户
                    </div>
                </div>
            </div>            <div class="col-md-3">
                <div class="stats-card fade-in">
                    <div class="stat-number">{{ total_divinations|default:0 }}</div>
                    <div class="stat-label">
                        <i class="fas fa-crystal-ball me-2"></i>占卜次数
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card fade-in">
                    <div class="stat-number">{{ total_notifications|default:0 }}</div>
                    <div class="stat-label">
                        <i class="fas fa-bell me-2"></i>系统通知
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card fade-in">
                    <div class="stat-number">4</div>
                    <div class="stat-label">
                        <i class="fas fa-magic me-2"></i>占卜类型
                    </div>                </div>
            </div>
        </div>
    </div>
</section>

<!-- 功能介绍 -->
                    <div class="stat-number display-4 fw-bold text-info mb-2">99%</div>
                    <div class="stat-label text-muted">用户满意度</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 功能特色 -->
<section class="features-section py-5">
    <div class="container">
        <div class="text-center mb-5 fade-in">
            <h2 class="display-5 fw-bold text-gradient">
                <i class="fas fa-sparkles me-3"></i>灵汐服务
            </h2>
            <p class="lead text-mystical">全方位的命理分析服务，助您洞察人生，感知未来</p>
        </div>
        <div class="row g-4">            <div class="col-md-6 col-lg-3">
                <div class="mystic-card text-center h-100 slide-in-left">
                    <div class="card-body p-4">
                        <div class="feature-icon mb-3 mystic-float">
                            <i class="fas fa-yin-yang fa-3x text-gradient-gold"></i>
                        </div>
                        <h5 class="fw-bold text-gradient mb-3">八字分析</h5>
                        <p class="text-mystical mb-4">精准解读生辰八字，洞察性格特征，预见运势走向</p>
                        <a href="{% url 'divination:bazi' %}" class="btn btn-mystic">
                            <i class="fas fa-magic me-2"></i>开始分析
                        </a>
                    </div>
                    <div class="mystic-glow"></div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="mystic-card text-center h-100 slide-in-left">
                    <div class="card-body p-4">
                        <div class="feature-icon mb-3 mystic-float" style="animation-delay: 0.5s;">
                            <i class="fas fa-leaf fa-3x text-gradient-green"></i>
                        </div>
                        <h5 class="fw-bold text-gradient mb-3">梅花易数</h5>
                        <p class="text-mystical mb-4">古老的占卜智慧，探寻万物变化规律，预测事物发展</p>
                        <a href="{% url 'divination:meihua' %}" class="btn btn-mystic-green">
                            <i class="fas fa-seedling me-2"></i>开始占卜
                        </a>
                    </div>
                    <div class="mystic-glow"></div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="mystic-card text-center h-100 slide-in-right">
                    <div class="card-body p-4">
                        <div class="feature-icon mb-3 mystic-float" style="animation-delay: 1s;">
                            <i class="fas fa-star fa-3x text-gradient-purple"></i>
                        </div>
                        <h5 class="fw-bold text-gradient mb-3">塔罗占卜</h5>
                        <p class="text-mystical mb-4">神秘的塔罗牌阵，揭示心灵密码，指引人生方向</p>
                        <a href="{% url 'divination:tarot' %}" class="btn btn-mystic-purple">
                            <i class="fas fa-star-of-david me-2"></i>开始占卜
                        </a>
                    </div>
                    <div class="mystic-glow"></div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="mystic-card text-center h-100 slide-in-right">
                    <div class="card-body p-4">
                        <div class="feature-icon mb-3 mystic-float" style="animation-delay: 1.5s;">
                            <i class="fas fa-calendar-alt fa-3x text-gradient-blue"></i>
                        </div>
                        <h5 class="fw-bold text-gradient mb-3">黄历查询</h5>
                        <p class="text-mystical mb-4">传统黄历智慧，选择吉日良辰，趋吉避凶</p>
                        <a href="{% url 'chinese_calendar:calendar' %}" class="btn btn-mystic-blue">
                            <i class="fas fa-clock me-2"></i>查看黄历
                        </a>
                    </div>
                    <div class="mystic-glow"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 最新占卜记录 -->
{% if recent_records %}
<section class="recent-section py-5 mystic-bg-secondary">
    <div class="container">
        <div class="text-center mb-5 fade-in">
            <h2 class="display-6 fw-bold text-gradient">
                <i class="fas fa-history me-3"></i>灵汐见证
            </h2>
            <p class="lead text-mystical">他们在灵汐平台探寻命运轨迹</p>
        </div>
        <div class="row g-4">
            {% for record in recent_records %}
            <div class="col-md-6 col-lg-4">
                <div class="mystic-card h-100 slide-in-up" style="animation-delay: {{ forloop.counter0|add:1 }}00ms;">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="avatar-circle mystic-glow-avatar text-white d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px; border-radius: 50%;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <h6 class="mb-0 text-gradient">{{ record.user.username|default:"神秘访客" }}</h6>
                                <small class="text-mystical">{{ record.created_at|timesince }}前的探索</small>
                            </div>
                        </div>
                        <div class="mb-3">
                            {% if record.divination_type == 'bazi' %}
                                <span class="badge badge-mystic-gold"><i class="fas fa-yin-yang me-1"></i>{{ record.get_divination_type_display }}</span>
                            {% elif record.divination_type == 'meihua' %}
                                <span class="badge badge-mystic-green"><i class="fas fa-leaf me-1"></i>{{ record.get_divination_type_display }}</span>
                            {% elif record.divination_type == 'tarot' %}
                                <span class="badge badge-mystic-purple"><i class="fas fa-star me-1"></i>{{ record.get_divination_type_display }}</span>
                            {% elif record.divination_type == 'yijing' %}
                                <span class="badge badge-mystic-blue"><i class="fas fa-yin-yang me-1"></i>{{ record.get_divination_type_display }}</span>
                            {% endif %}
                        </div>
                        {% if record.question %}
                            <p class="text-mystical small mb-2"><strong>问：</strong>{{ record.question|truncatechars:50 }}</p>
                        {% endif %}
                        <p class="card-text text-mystical">{{ record.result|truncatechars:80 }}</p>
                        <div class="text-end">
                            <small class="text-muted-light">{{ record.created_at|date:"Y-m-d H:i" }}</small>
                        </div>
                    </div>
                    <div class="mystic-glow"></div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- 今日运势 -->
<section class="today-fortune py-5 mystic-bg-tertiary">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="fade-in">
                    <h2 class="display-6 fw-bold mb-4 text-gradient">
                        <i class="fas fa-sun me-3"></i>今日灵汐
                    </h2>
                    <div class="mystic-card p-4 text-mystical">
                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-calendar-alt fa-2x text-gradient-gold me-3"></i>
                            <h5 class="fw-bold mb-0 text-gradient">{{ today_date|date:"Y年m月d日" }}</h5>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <p><i class="fas fa-moon me-2 text-gradient-blue"></i><strong>农历：</strong>甲辰年 四月 廿一</p>
                                <p><i class="fas fa-yin-yang me-2 text-gradient-purple"></i><strong>干支：</strong>甲子年</p>
                            </div>
                            <div class="col-sm-6">
                                <p><i class="fas fa-check-circle me-2 text-gradient-green"></i><strong>宜：</strong>祭祀 祈福 纳采</p>
                                <p><i class="fas fa-times-circle me-2 text-gradient-red"></i><strong>忌：</strong>开市 动土 安葬</p>
                            </div>
                        </div>
                        <div class="mystic-glow"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <div class="slide-in-right">
                    <a href="{% url 'chinese_calendar:today' %}" class="btn btn-mystic-gold btn-lg">
                        <i class="fas fa-calendar-day me-2"></i>探寻今日奥秘
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<!-- Lingxi theme styles are included in the main CSS file -->
<style>
/* Additional page-specific animations */
@keyframes slide-in-up {
    from {
        opacity: 0;
        transform: translateY(50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-in-up {
    animation: slide-in-up 0.8s ease-out forwards;
    opacity: 0;
}
</style>
{% endblock %}
