<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>验证码按钮测试</title>
    <style>
        .btn-outline-zen {
            background: transparent;
            color: #c8b89e;
            border: 1px solid #c8b89e;
            border-radius: 8px;
            padding: 10px 16px;
            font-weight: 500;
            cursor: pointer;
        }
        .btn-outline-zen:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .form-control {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        .verification-status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        .verification-status.success {
            background: #d4edda;
            color: #155724;
        }
        .verification-status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .verification-status.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h2>验证码按钮测试</h2>
    <div>
        <input type="text" id="id_phone_number" class="form-control" placeholder="请输入手机号" value="13800138000">
        <button type="button" id="sendVerificationBtn" class="btn-outline-zen">获取验证码</button>
    </div>
    
    <div id="verificationStatus" class="verification-status">
        <i id="statusIcon"></i>
        <span id="statusText"></span>
    </div>
    
    <div id="console-output" style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 4px;">
        <h3>控制台输出:</h3>
        <div id="console-log"></div>
    </div>

    <script>
        // 添加控制台日志显示
        const originalLog = console.log;
        const consoleElement = document.getElementById('console-log');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logDiv = document.createElement('div');
            logDiv.textContent = args.join(' ');
            consoleElement.appendChild(logDiv);
        };

        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面已加载');
            
            const phoneField = document.getElementById('id_phone_number');
            const sendVerificationBtn = document.getElementById('sendVerificationBtn');
            const verificationStatus = document.getElementById('verificationStatus');
            const statusIcon = document.getElementById('statusIcon');
            const statusText = document.getElementById('statusText');
            
            console.log('验证码按钮元素:', sendVerificationBtn);
            console.log('手机号字段元素:', phoneField);
            
            // 显示验证状态
            function showVerificationStatus(type, message, icon = '') {
                console.log('显示状态:', type, message);
                if (verificationStatus && statusText) {
                    verificationStatus.className = `verification-status ${type}`;
                    verificationStatus.style.display = 'block';
                    statusText.textContent = message;
                    if (statusIcon && icon) {
                        statusIcon.className = `${icon} me-1`;
                    }
                }
            }
            
            // 手机号格式验证
            function validatePhoneNumber(phone) {
                const isValid = /^1[3-9]\d{9}$/.test(phone);
                console.log('手机号验证:', phone, '结果:', isValid);
                return isValid;
            }
            
            if (sendVerificationBtn) {
                console.log('找到验证码按钮，添加点击事件');
                sendVerificationBtn.addEventListener('click', function() {
                    console.log('验证码按钮被点击了！');
                    
                    const phoneNumber = phoneField.value.trim();
                    console.log('获取到的手机号:', phoneNumber);
                    
                    if (!validatePhoneNumber(phoneNumber)) {
                        showVerificationStatus('error', '请输入有效的11位手机号码');
                        return;
                    }
                    
                    showVerificationStatus('info', '正在发送验证码...');
                    
                    // 模拟发送验证码
                    setTimeout(() => {
                        showVerificationStatus('success', '验证码发送成功（模拟）');
                        console.log('验证码发送成功（模拟）');
                    }, 1000);
                });
            } else {
                console.log('错误：找不到验证码按钮！');
            }
        });
    </script>
</body>
</html>
